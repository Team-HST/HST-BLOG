---
title: "아이템5 - 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라."
date: "2020-04-17 05"
template: "post"
draft: false
category: "Effective Java"
tags:
  - "Java"
  - "effectiveJava"
description: "2장. 객체 생성과 파괴 - 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라."
---

### 아이템 5 - 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라

많은 클래스가 하나 이상의 자원에 의존한다.

예를 들어 맞춤법 검사기는 보통 사전에 의존하는데, 이 경우 아래 그림과 같이
클래스를 정적 유틸리티 클래스로 구현하거나 싱글턴으로 구현하는 경우도 있다.

이렇게 구현할 경우, 실제로 언어별, 특수 어휘용, 테스트용 사전 등 여러 쓰임새가 있기에
사전 하나로 이 모든 쓰임에 대응하기엔 유연하지 않고 테스트하기 어렵다는 단점이 있다.

##### 의존 객체 주입 패턴
인스턴스를 생성할 때 생성자에 필요한 자원을 넘겨주는 방식

사용하는 자원에 따라 동작이 달라지는 클래스에는 정적 유틸리티 클래스나 싱글턴 방식이 적합하지 않다.
대신 클래스가 여러 자원 인스턴스를 지원해야 하며, 클라이언트가 원하는 자원을 사용해야 한다.

맞춤법 검사기와 사전을 예로 들면, 맞춤법 검사기를 생성할 때 의존 객체인 사전을 주입해주면 된다.

인스턴스를 생성할 때인 생성자에서 사전을 주입받음으로써 의존 객체 주입 형태를 구현하며
유연성과 테스트 용이성을 높여준다.

의존 객체 주입 패턴은 불변을 보장하여 같은 자원을 사용하려는
여러 클라이언트가 의존 객체들을 안전하게 사용하고 공유할 수 있다.

##### 생성자에 자원 팩토리를 넘겨주는 방식
 팩토리 - 팩토리 메소드를 구현한 것으로 호출할 때마다 특정 타입의 인스턴스를 반복해서 만들어주는 객체
            ex) 자바 8의 Supplier<T> 인터페이스 가 팩토리를 완벽하게 표현

 > Supplier<T> 를 입력으로 받는 메소드는 보통 한정적 *와일드카드 타입을 사용해
    팩토리의 타입 매개변수를 제한해야 한다. 이 방식을 통해 클라이언트는 자신이 명시한 타입의 하위 타입까지
    모두 생성할 수 있는 팩토리를 넘길 수 있다.

다만 의존 객체 주입이 주는 장점과는 반대로 의존성이 수천 개 이상 넘어가는 큰 프로젝트에서는
코드가 어지러워질 수 있다. 하지만 이 또한 의존 객체 주입 프레임워크를 사용함으로써 해소할 수 있다. 

* 와일드카드 타입 : 제네릭 타입을 매개변수나 리턴타입으로 사용할 때 타입 파라미터를 제한할 목적
